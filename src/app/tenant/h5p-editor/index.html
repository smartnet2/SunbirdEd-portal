<html>

<head>
  <meta charset="UTF-8">
  <script> window.H5PIntegration = parent.H5PIntegration || {
      "ajax": {
        "contentUserData": "",
        "setFinished": ""
      },
      "ajaxPath": "/h5p/ajax?action=",
      "editor": {
        "filesPath": "/h5p/temp-files",
        "fileIcon": {
          "path": "http://lumi.education/editor/images/binary-file.png",
          "width": 50,
          "height": 50
        },
        "ajaxPath": "/h5p/ajax?action=",
        "libraryUrl": "/h5p/editor/",
        "copyrightSemantics": {
          "name": "copyright",
          "type": "group",
          "label": "Copyright information",
          "fields": [
            {
              "name": "title",
              "type": "text",
              "label": "Title",
              "placeholder": "La Gioconda",
              "optional": true
            },
            {
              "name": "author",
              "type": "text",
              "label": "Author",
              "placeholder": "Leonardo da Vinci",
              "optional": true
            },
            {
              "name": "year",
              "type": "text",
              "label": "Year(s)",
              "placeholder": "1503 - 1517",
              "optional": true
            },
            {
              "name": "source",
              "type": "text",
              "label": "Source",
              "placeholder": "http://en.wikipedia.org/wiki/Mona_Lisa",
              "optional": true,
              "regexp": {
                "pattern": "^http[s]?://.+",
                "modifiers": "i"
              }
            },
            {
              "name": "license",
              "type": "select",
              "label": "License",
              "default": "U",
              "options": [
                {
                  "value": "U",
                  "label": "Undisclosed"
                },
                {
                  "value": "CC BY",
                  "label": "Attribution",
                  "versions": [
                    {
                      "value": "4.0",
                      "label": "4.0 International"
                    },
                    {
                      "value": "3.0",
                      "label": "3.0 Unported"
                    },
                    {
                      "value": "2.5",
                      "label": "2.5 Generic"
                    },
                    {
                      "value": "2.0",
                      "label": "2.0 Generic"
                    },
                    {
                      "value": "1.0",
                      "label": "1.0 Generic"
                    }
                  ]
                },
                {
                  "value": "CC BY-SA",
                  "label": "Attribution-ShareAlike",
                  "versions": [
                    {
                      "value": "4.0",
                      "label": "4.0 International"
                    },
                    {
                      "value": "3.0",
                      "label": "3.0 Unported"
                    },
                    {
                      "value": "2.5",
                      "label": "2.5 Generic"
                    },
                    {
                      "value": "2.0",
                      "label": "2.0 Generic"
                    },
                    {
                      "value": "1.0",
                      "label": "1.0 Generic"
                    }
                  ]
                },
                {
                  "value": "CC BY-ND",
                  "label": "Attribution-NoDerivs",
                  "versions": [
                    {
                      "value": "4.0",
                      "label": "4.0 International"
                    },
                    {
                      "value": "3.0",
                      "label": "3.0 Unported"
                    },
                    {
                      "value": "2.5",
                      "label": "2.5 Generic"
                    },
                    {
                      "value": "2.0",
                      "label": "2.0 Generic"
                    },
                    {
                      "value": "1.0",
                      "label": "1.0 Generic"
                    }
                  ]
                },
                {
                  "value": "CC BY-NC",
                  "label": "Attribution-NonCommercial",
                  "versions": [
                    {
                      "value": "4.0",
                      "label": "4.0 International"
                    },
                    {
                      "value": "3.0",
                      "label": "3.0 Unported"
                    },
                    {
                      "value": "2.5",
                      "label": "2.5 Generic"
                    },
                    {
                      "value": "2.0",
                      "label": "2.0 Generic"
                    },
                    {
                      "value": "1.0",
                      "label": "1.0 Generic"
                    }
                  ]
                },
                {
                  "value": "CC BY-NC-SA",
                  "label": "Attribution-NonCommercial-ShareAlike",
                  "versions": [
                    {
                      "value": "4.0",
                      "label": "4.0 International"
                    },
                    {
                      "value": "3.0",
                      "label": "3.0 Unported"
                    },
                    {
                      "value": "2.5",
                      "label": "2.5 Generic"
                    },
                    {
                      "value": "2.0",
                      "label": "2.0 Generic"
                    },
                    {
                      "value": "1.0",
                      "label": "1.0 Generic"
                    }
                  ]
                },
                {
                  "value": "CC BY-NC-ND",
                  "label": "Attribution-NonCommercial-NoDerivs",
                  "versions": [
                    {
                      "value": "4.0",
                      "label": "4.0 International"
                    },
                    {
                      "value": "3.0",
                      "label": "3.0 Unported"
                    },
                    {
                      "value": "2.5",
                      "label": "2.5 Generic"
                    },
                    {
                      "value": "2.0",
                      "label": "2.0 Generic"
                    },
                    {
                      "value": "1.0",
                      "label": "1.0 Generic"
                    }
                  ]
                },
                {
                  "value": "GNU GPL",
                  "label": "General Public License",
                  "versions": [
                    {
                      "value": "v3",
                      "label": "Version 3"
                    },
                    {
                      "value": "v2",
                      "label": "Version 2"
                    },
                    {
                      "value": "v1",
                      "label": "Version 1"
                    }
                  ]
                },
                {
                  "value": "PD",
                  "label": "Public Domain",
                  "versions": [
                    {
                      "value": "-",
                      "label": "-"
                    },
                    {
                      "value": "CC0 1.0",
                      "label": "CC0 1.0 Universal"
                    },
                    {
                      "value": "CC PDM",
                      "label": "Public Domain Mark"
                    }
                  ]
                },
                {
                  "value": "C",
                  "label": "Copyright"
                }
              ]
            },
            {
              "name": "version",
              "type": "select",
              "label": "License Version",
              "options": []
            }
          ]
        },
        "metadataSemantics": [
          {
            "name": "title",
            "type": "text",
            "label": "Title",
            "placeholder": "La Gioconda"
          },
          {
            "name": "license",
            "type": "select",
            "label": "License",
            "default": "U",
            "options": [
              {
                "value": "U",
                "label": "Undisclosed"
              },
              {
                "type": "optgroup",
                "label": "Creative Commons",
                "options": [
                  {
                    "value": "CC BY",
                    "label": "Attribution (CC BY)",
                    "versions": [
                      {
                        "value": "4.0",
                        "label": "4.0 International"
                      },
                      {
                        "value": "3.0",
                        "label": "3.0 Unported"
                      },
                      {
                        "value": "2.5",
                        "label": "2.5 Generic"
                      },
                      {
                        "value": "2.0",
                        "label": "2.0 Generic"
                      },
                      {
                        "value": "1.0",
                        "label": "1.0 Generic"
                      }
                    ]
                  },
                  {
                    "value": "CC BY-SA",
                    "label": "Attribution-ShareAlike (CC BY-SA)",
                    "versions": [
                      {
                        "value": "4.0",
                        "label": "4.0 International"
                      },
                      {
                        "value": "3.0",
                        "label": "3.0 Unported"
                      },
                      {
                        "value": "2.5",
                        "label": "2.5 Generic"
                      },
                      {
                        "value": "2.0",
                        "label": "2.0 Generic"
                      },
                      {
                        "value": "1.0",
                        "label": "1.0 Generic"
                      }
                    ]
                  },
                  {
                    "value": "CC BY-ND",
                    "label": "Attribution-NoDerivs (CC BY-ND)",
                    "versions": [
                      {
                        "value": "4.0",
                        "label": "4.0 International"
                      },
                      {
                        "value": "3.0",
                        "label": "3.0 Unported"
                      },
                      {
                        "value": "2.5",
                        "label": "2.5 Generic"
                      },
                      {
                        "value": "2.0",
                        "label": "2.0 Generic"
                      },
                      {
                        "value": "1.0",
                        "label": "1.0 Generic"
                      }
                    ]
                  },
                  {
                    "value": "CC BY-NC",
                    "label": "Attribution-NonCommercial (CC BY-NC)",
                    "versions": [
                      {
                        "value": "4.0",
                        "label": "4.0 International"
                      },
                      {
                        "value": "3.0",
                        "label": "3.0 Unported"
                      },
                      {
                        "value": "2.5",
                        "label": "2.5 Generic"
                      },
                      {
                        "value": "2.0",
                        "label": "2.0 Generic"
                      },
                      {
                        "value": "1.0",
                        "label": "1.0 Generic"
                      }
                    ]
                  },
                  {
                    "value": "CC BY-NC-SA",
                    "label": "Attribution-NonCommercial-ShareAlike (CC BY-NC-SA)",
                    "versions": [
                      {
                        "value": "4.0",
                        "label": "4.0 International"
                      },
                      {
                        "value": "3.0",
                        "label": "3.0 Unported"
                      },
                      {
                        "value": "2.5",
                        "label": "2.5 Generic"
                      },
                      {
                        "value": "2.0",
                        "label": "2.0 Generic"
                      },
                      {
                        "value": "1.0",
                        "label": "1.0 Generic"
                      }
                    ]
                  },
                  {
                    "value": "CC BY-NC-ND",
                    "label": "Attribution-NonCommercial-NoDerivs (CC BY-NC-ND)",
                    "versions": [
                      {
                        "value": "4.0",
                        "label": "4.0 International"
                      },
                      {
                        "value": "3.0",
                        "label": "3.0 Unported"
                      },
                      {
                        "value": "2.5",
                        "label": "2.5 Generic"
                      },
                      {
                        "value": "2.0",
                        "label": "2.0 Generic"
                      },
                      {
                        "value": "1.0",
                        "label": "1.0 Generic"
                      }
                    ]
                  },
                  {
                    "value": "CC0 1.0",
                    "label": "Public Domain Dedication (CC0)"
                  },
                  {
                    "value": "CC PDM",
                    "label": "Public Domain Mark (PDM)"
                  }
                ]
              },
              {
                "value": "GNU GPL",
                "label": "General Public License v3"
              },
              {
                "value": "PD",
                "label": "Public Domain"
              },
              {
                "value": "ODC PDDL",
                "label": "Public Domain Dedication and Licence"
              },
              {
                "value": "C",
                "label": "Copyright"
              }
            ]
          },
          {
            "name": "licenseVersion",
            "type": "select",
            "label": "License Version",
            "options": [
              {
                "value": "4.0",
                "label": "4.0 International"
              },
              {
                "value": "3.0",
                "label": "3.0 Unported"
              },
              {
                "value": "2.5",
                "label": "2.5 Generic"
              },
              {
                "value": "2.0",
                "label": "2.0 Generic"
              },
              {
                "value": "1.0",
                "label": "1.0 Generic"
              }
            ],
            "optional": true
          },
          {
            "name": "yearFrom",
            "type": "number",
            "label": "Years (from)",
            "placeholder": "1991",
            "min": "-9999",
            "max": "9999",
            "optional": true
          },
          {
            "name": "yearTo",
            "type": "number",
            "label": "Years (to)",
            "placeholder": "1992",
            "min": "-9999",
            "max": "9999",
            "optional": true
          },
          {
            "name": "source",
            "type": "text",
            "label": "Source",
            "placeholder": "https://",
            "optional": true
          },
          {
            "name": "authors",
            "type": "list",
            "field": {
              "name": "author",
              "type": "group",
              "fields": [
                {
                  "label": "Author's name",
                  "name": "name",
                  "optional": true,
                  "type": "text"
                },
                {
                  "name": "role",
                  "type": "select",
                  "label": "Author's role",
                  "default": "Author",
                  "options": [
                    {
                      "value": "Author",
                      "label": "Author"
                    },
                    {
                      "value": "Editor",
                      "label": "Editor"
                    },
                    {
                      "value": "Licensee",
                      "label": "Licensee"
                    },
                    {
                      "value": "Originator",
                      "label": "Originator"
                    }
                  ]
                }
              ]
            }
          },
          {
            "name": "licenseExtras",
            "type": "text",
            "widget": "textarea",
            "label": "License Extras",
            "optional": true,
            "description": "Any additional information about the license"
          },
          {
            "name": "changes",
            "type": "list",
            "field": {
              "name": "change",
              "type": "group",
              "label": "Changelog",
              "fields": [
                {
                  "name": "date",
                  "type": "text",
                  "label": "Date",
                  "optional": true
                },
                {
                  "name": "author",
                  "type": "text",
                  "label": "Changed by",
                  "optional": true
                },
                {
                  "name": "log",
                  "type": "text",
                  "widget": "textarea",
                  "label": "Description of change",
                  "placeholder": "Photo cropped, text changed, etc.",
                  "optional": true
                }
              ]
            }
          },
          {
            "name": "authorComments",
            "type": "text",
            "widget": "textarea",
            "label": "Author comments",
            "description": "Comments for the editor of the content (This text will not be published as a part of copyright info)",
            "optional": true
          },
          {
            "name": "contentType",
            "type": "text",
            "widget": "none"
          }
        ],
        "assets": {
          "css": [
            "/h5p/core/styles/h5p.css",
            "/h5p/core/styles/h5p-confirmation-dialog.css",
            "/h5p/core/styles/h5p-core-button.css",
            "/h5p/editor/libs/darkroom.css",
            "/h5p/editor/styles/css/h5p-hub-client.css",
            "/h5p/editor/styles/css/fonts.css",
            "/h5p/editor/styles/css/application.css",
            "/h5p/editor/styles/css/libs/zebra_datepicker.min.css"
          ],
          "js": [
            "/h5p/core/js/jquery.js",
            "/h5p/core/js/h5p.js",
            "/h5p/core/js/h5p-event-dispatcher.js",
            "/h5p/core/js/h5p-x-api-event.js",
            "/h5p/core/js/h5p-x-api.js",
            "/h5p/core/js/h5p-content-type.js",
            "/h5p/core/js/h5p-confirmation-dialog.js",
            "/h5p/core/js/h5p-action-bar.js",
            "/h5p/editor/scripts/h5p-hub-client.js",
            "/h5p/editor/scripts/h5peditor.js",
            "/h5p/editor/language/en.js",
            "/h5p/editor/scripts/h5peditor-semantic-structure.js",
            "/h5p/editor/scripts/h5peditor-library-selector.js",
            "/h5p/editor/scripts/h5peditor-form.js",
            "/h5p/editor/scripts/h5peditor-text.js",
            "/h5p/editor/scripts/h5peditor-html.js",
            "/h5p/editor/scripts/h5peditor-number.js",
            "/h5p/editor/scripts/h5peditor-textarea.js",
            "/h5p/editor/scripts/h5peditor-file-uploader.js",
            "/h5p/editor/scripts/h5peditor-file.js",
            "/h5p/editor/scripts/h5peditor-image.js",
            "/h5p/editor/scripts/h5peditor-image-popup.js",
            "/h5p/editor/scripts/h5peditor-av.js",
            "/h5p/editor/scripts/h5peditor-group.js",
            "/h5p/editor/scripts/h5peditor-boolean.js",
            "/h5p/editor/scripts/h5peditor-list.js",
            "/h5p/editor/scripts/h5peditor-list-editor.js",
            "/h5p/editor/scripts/h5peditor-library.js",
            "/h5p/editor/scripts/h5peditor-library-list-cache.js",
            "/h5p/editor/scripts/h5peditor-select.js",
            "/h5p/editor/scripts/h5peditor-selector-hub.js",
            "/h5p/editor/scripts/h5peditor-selector-legacy.js",
            "/h5p/editor/scripts/h5peditor-dimensions.js",
            "/h5p/editor/scripts/h5peditor-coordinates.js",
            "/h5p/editor/scripts/h5peditor-none.js",
            "/h5p/editor/scripts/h5peditor-metadata.js",
            "/h5p/editor/scripts/h5peditor-metadata-author-widget.js",
            "/h5p/editor/scripts/h5peditor-metadata-changelog-widget.js",
            "/h5p/editor/scripts/h5peditor-pre-save.js",
            "/h5p/editor/ckeditor/ckeditor.js"
          ]
        },
        "deleteMessage": "Are you sure you wish to delete this content?",
        "apiVersion": {
          "majorVersion": 1,
          "minorVersion": 24
        }
      },
      "hubIsEnabled": true,
      "l10n": {
        "H5P": {
          "fullscreen": "Fullscreen",
          "disableFullscreen": "Disable fullscreen",
          "download": "Download",
          "copyrights": "Rights of use",
          "embed": "Embed",
          "size": "Size",
          "showAdvanced": "Show advanced",
          "hideAdvanced": "Hide advanced",
          "advancedHelp": "Include this script on your website if you want dynamic sizing of the embedded content:",
          "copyrightInformation": "Rights of use",
          "close": "Close",
          "title": "Title",
          "author": "Author",
          "year": "Year",
          "source": "Source",
          "license": "License",
          "thumbnail": "Thumbnail",
          "noCopyrights": "No copyright information available for this content.",
          "downloadDescription": "Download this content as a H5P file.",
          "copyrightsDescription": "View copyright information for this content.",
          "embedDescription": "View the embed code for this content.",
          "h5pDescription": "Visit H5P.org to check out more cool content.",
          "contentChanged": "This content has changed since you last used it.",
          "startingOver": "You'll be starting over.",
          "by": "by",
          "showMore": "Show more",
          "showLess": "Show less",
          "subLevel": "Sublevel",
          "confirmDialogHeader": "Confirm action",
          "confirmDialogBody": "Please confirm that you wish to proceed. This action is not reversible.",
          "cancelLabel": "Cancel",
          "confirmLabel": "Confirm",
          "licenseU": "Undisclosed",
          "licenseCCBY": "Attribution",
          "licenseCCBYSA": "Attribution-ShareAlike",
          "licenseCCBYND": "Attribution-NoDerivs",
          "licenseCCBYNC": "Attribution-NonCommercial",
          "licenseCCBYNCSA": "Attribution-NonCommercial-ShareAlike",
          "licenseCCBYNCND": "Attribution-NonCommercial-NoDerivs",
          "licenseCC40": "4.0 International",
          "licenseCC30": "3.0 Unported",
          "licenseCC25": "2.5 Generic",
          "licenseCC20": "2.0 Generic",
          "licenseCC10": "1.0 Generic",
          "licenseGPL": "General Public License",
          "licenseV3": "Version 3",
          "licenseV2": "Version 2",
          "licenseV1": "Version 1",
          "licensePD": "Public Domain",
          "licenseCC010": "CC0 1.0 Universal (CC0 1.0) Public Domain Dedication",
          "licensePDM": "Public Domain Mark",
          "licenseC": "Copyright",
          "contentType": "Content Type",
          "licenseExtras": "License Extras",
          "changes": "Changelog"
        }
      },
      "postUserStatistics": false,
      "saveFreq": false,
      "url": "/h5p",
      "user": {
        "mail": "",
        "name": ""
      }
    }</script>
  <link rel="stylesheet" href="/h5p/core/styles/h5p.css">
  <link rel="stylesheet" href="/h5p/core/styles/h5p-confirmation-dialog.css">
  <link rel="stylesheet" href="/h5p/core/styles/h5p-core-button.css">
  <link rel="stylesheet" href="/h5p/editor/libs/darkroom.css">
  <link rel="stylesheet" href="/h5p/editor/styles/css/h5p-hub-client.css">
  <link rel="stylesheet" href="/h5p/editor/styles/css/fonts.css">
  <link rel="stylesheet" href="/h5p/editor/styles/css/application.css">
  <link rel="stylesheet" href="/h5p/editor/styles/css/libs/zebra_datepicker.min.css">
  <script src="/h5p/core/js/jquery.js"></script>
  <script src="/h5p/core/js/h5p.js"></script>
  <script src="/h5p/core/js/h5p-event-dispatcher.js"></script>
  <script src="/h5p/core/js/h5p-x-api-event.js"></script>
  <script src="/h5p/core/js/h5p-x-api.js"></script>
  <script src="/h5p/core/js/h5p-content-type.js"></script>
  <script src="/h5p/core/js/h5p-confirmation-dialog.js"></script>
  <script src="/h5p/core/js/h5p-action-bar.js"></script>
  <script src="/h5p/editor/scripts/h5p-hub-client.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-editor.js"></script>
  <script src="/h5p/editor/scripts/h5peditor.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-semantic-structure.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-library-selector.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-form.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-text.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-html.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-number.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-textarea.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-file-uploader.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-file.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-image.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-image-popup.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-av.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-group.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-boolean.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-list.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-list-editor.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-library.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-library-list-cache.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-select.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-selector-hub.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-selector-legacy.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-dimensions.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-coordinates.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-none.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-metadata.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-metadata-author-widget.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-metadata-changelog-widget.js"></script>
  <script src="/h5p/editor/scripts/h5peditor-pre-save.js"></script>
  <script src="/h5p/editor/ckeditor/ckeditor.js"></script>
</head>

<body>

  <form method="post" enctype="multipart/form-data" id="h5p-content-form">
    <div id="post-body-content">
      <div class="h5p-create">
        <div class="h5p-editor"></div>
      </div>
    </div>
    <input type="submit" name="submit" value="Create" class="button button-primary button-large">
  </form>
  <script>
    var ns = H5PEditor;

    (function ($) {
      H5PEditor.init = function () {
        H5PEditor.$ = H5P.jQuery;
        H5PEditor.basePath = H5PIntegration.editor.libraryUrl;
        H5PEditor.fileIcon = H5PIntegration.editor.fileIcon;
        H5PEditor.ajaxPath = H5PIntegration.editor.ajaxPath;
        H5PEditor.filesPath = H5PIntegration.editor.filesPath;
        H5PEditor.apiVersion = H5PIntegration.editor.apiVersion;

        // Semantics describing what copyright information can be stored for media.
        H5PEditor.copyrightSemantics = H5PIntegration.editor.copyrightSemantics;
        H5PEditor.metadataSemantics = H5PIntegration.editor.metadataSemantics;

        // Required styles and scripts for the editor
        H5PEditor.assets = H5PIntegration.editor.assets;

        // Required for assets
        H5PEditor.baseUrl = '';

        if (H5PIntegration.editor.nodeVersionId !== undefined) {
          H5PEditor.contentId = H5PIntegration.editor.nodeVersionId;
        }

        var h5peditor;
        var $type = $('input[name="action"]');
        var $upload = $('.h5p-upload');
        var $create = $('.h5p-create').hide();
        var $editor = $('.h5p-editor');
        var $library = $('input[name="library"]');
        var $params = $('input[name="parameters"]');
        var library = $library.val();

        // $type.change(function () {
        //   if ($type.filter(':checked').val() === 'upload') {
        //     $create.hide();
        //     $upload.show();
        //   }
        //   else {
        $upload.hide();
        if (h5peditor === undefined) {
          $.ajax({
            error: function (res) {
              h5peditor = new ns.Editor(undefined, undefined, $editor[0]);
              $create.show();
            },
            success: function (res) {
              h5peditor = new ns.Editor(
                res.library,
                JSON.stringify(res.params),
                $editor[0]
              );
              $create.show();
              // $type.change();
            },
            type: 'GET',
            url: 'params' + window.location.search
          });
        }
        $create.show();
        //   }
        // });

        if ($type.filter(':checked').val() === 'upload') {
          $type.change();
        } else {
          $type
            .filter('input[value="create"]')
            .attr('checked', true)
            .change();
        }

        $('#h5p-content-form').submit(function (event) {
          if (h5peditor !== undefined) {
            var params = h5peditor.getParams();

            if (params.params !== undefined) {
              // Validate mandatory main title. Prevent submitting if that's not set.
              // Deliberatly doing it after getParams(), so that any other validation
              // problems are also revealed
              // if (!h5peditor.isMainTitleSet()) {

              // }

              // Set main library
              $library.val(h5peditor.getLibrary());

              // Set params
              $params.val(JSON.stringify(params));

              $.ajax({
                data: JSON.stringify({
                  library: h5peditor.getLibrary(),
                  params
                }),
                headers: {
                  'Content-Type': 'application/json'
                },
                type: 'POST'
              });

              return event.preventDefault();
              // TODO - Calculate & set max score
              // $maxscore.val(h5peditor.getMaxScore(params.params));
            }
          }
        });

        // Title label
        var $title = $('#h5p-content-form #title');
        var $label = $title.prev();
        $title
          .focus(function () {
            $label.addClass('screen-reader-text');
          })
          .blur(function () {
            if ($title.val() === '') {
              $label.removeClass('screen-reader-text');
            }
          })
          .focus();

        // Delete confirm
        $('.submitdelete').click(function () {
          return confirm(H5PIntegration.editor.deleteMessage);
        });
      };

      H5PEditor.getAjaxUrl = function (action, parameters) {
        var url = H5PIntegration.editor.ajaxPath + action;

        if (parameters !== undefined) {
          for (var property in parameters) {
            if (parameters.hasOwnProperty(property)) {
              url += '&' + property + '=' + parameters[property];
            }
          }
        }

        url += window.location.search.replace(/\?/g, '&');
        return url;
      };

      $(document).ready(H5PEditor.init);
    })(H5P.jQuery);
  </script>
</body>

</html>